{% extends "base.html" %}
{% block head %}
    <script src="{{ url_for('static', filename='js/datatables.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/moment-with-locales.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/datatables.min.css') }}"/>


  <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.27.2/js/components/accordion.min.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.27.2/css/components/accordion.gradient.min.css" />

{% endblock %}
{% block main %}
<div class="uk-panel uk-width-1-1 uk-panel-space uk-overflow-container">
    <div class="uk-accordion" data-uk-accordion id="accordion">

        <h3 class="uk-accordion-title">General information</h3>
        <div class="uk-accordion-content">

            <div class="uk-panel uk-width-1-1 uk-panel-space">
                <div class="uk-grid">
                    <div class="uk-width-small-1-1 uk-width-medium-1-2">
                        <table id="overvieww" class="uk-table uk-table-hover uk-table-striped uk-table-condensed">
                            <thead>
                                <tr>
                                    <th data-priority="1">Partition</th>
                                    <th data-priority="2">Allocated</th>
                                    <th data-priority="3">Idle</th>
                                    <th data-priority="4">Other</th>
                                    <th data-priority="5">Total</th>
                                </tr>
                            </thead>
                            <tbody id="slurm">
                                {% for part in data.partition|sort(attribute='total', reverse=True) %}
                                <tr>
                                    <td>{{part.name}}</td>
                                    <td>{{part.allocated}}</td>
                                    <td>{{part.idle}}</td>
                                    <td>{{part.other}}</td>
                                    <td>{{part.total}}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                        <button class="uk-button uk-width-1-1 uk-margin-small-bottom slurm_reload"><span class="uk-icon-refresh"></span>&nbsp;Reload</button>
                    </div>
                    <div class="uk-margin-top uk-width-small-1-1 uk-hidden-medium uk-hidden-large">
                    </div>
                    <div class="uk-width-small-1-1 uk-width-medium-1-2">
                        <div class="uk-panel uk-width-1-1 uk-panel-box uk-clearfix">
                            <button class="uk-button uk-button-mini uk-float-right system_reload"><span class="uk-icon-refresh">&nbsp;</span>Reload</button>
                            <div id="system_body">
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="uk-width-1-2">

            </div>

        </div>

        {% if data.extension %}
        <h3 class="uk-accordion-title">Pending projects</h3>
        <div class="uk-accordion-content" id="pending_content">
            <table id="ext_result_table" class="table table-striped dt-responsive" width="100%">
                <thead>
                <tr>
                    <th data-priority="1"></th>
                    <th data-priority="1">Project</th>
                    <th data-priority="7">Responsible</th>
                    <th data-priority="6">Present</th>
                    <th data-priority="5">Use</th>
                    <th data-priority="4">Extension</th>
                    <th data-priority="2">Activate</th>
                    <th>Activate data</th>
                    <th data-priority="2">Transform</th>
                    <th>Transform data</th>
                    <th data-priority="3">Date</th>
                    <th data-priority="8">Reason</th>
                    <th data-priority="9">Extend id</th>
                    <th data-priority="9">Project id</th>
                    <th data-priority="9">CPU Consumed</th>
                </tr>
                </thead>
                <tfoot>
                <tr>
                    <th></th>
                    <th>Project</th>
                    <th>Responsible</th>
                    <th>Present</th>
                    <th>Use</th>
                    <th>Extension</th>
                    <th>Activate</th>
                    <th>Activate data</th>
                    <th>Transform</th>
                    <th>Transform data</th>
                    <th>Date</th>
                    <th>Reason</th>
                    <th>Extend id</th>
                    <th>Project id</th>
                    <th>CPU Consumed</th>
                </tr>
                </tfoot>
                <tbody id="ext_result_records">
                {% if data %}

                    {% for record in data|sort(attribute='created') %}
                        <tr id="{{ record.id }}">
                            <td></td>
                            <td>{{ record.project_name }}</td>
                            <td>{{ record.responsible }}</td>
                            <td>{{ record.total }}</td>
                            <td>{{ record.usage }}</td>
                            <td>{{ record.hours }}</td>
                            <td>{{ record.activate }}</td>
                            <td>{{ record.activate }}</td>
                            <td>{{ record.transform }}</td>
                            <td>{{ record.transform }}</td>
                            <td>{{ record.created }}</td>
                            <td>{{ record.reason }}</td>
                            <td>{{ record.id }}</td>
                            <td>{{ record.project }}</td>
                            <td>{{ record.use}}</td>
                        </tr>
                    {% endfor %}
                {% endif %}
                </tbody>
            </table>
        </div>
        {% endif %}

        <h3 class="uk-accordion-title">Endpoint Access Control List</h3>
        <div class="uk-accordion-content">
        </div>

    </div>
</div>

{% endblock %}