{% extends "base.html" %}
{% block head %}
    <!--<script src="{{ url_for('static', filename='js/datatables.min.js') }}"></script>-->
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.21/b-1.6.2/b-html5-1.6.2/r-2.2.5/datatables.min.css"/>

<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jszip-2.5.0/dt-1.10.21/b-1.6.2/b-html5-1.6.2/r-2.2.5/datatables.min.js"></script>
<script type="text/javascript" src="https://getuikit.com/v2/src/js/components/datepicker.js"></script>


    <script src="{{ url_for('static', filename='js/moment-with-locales.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/admin.js') }}"></script>

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/datatables.min.css') }}"/>


    <script defer type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.27.2/js/components/accordion.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/uikit/2.27.2/css/components/accordion.gradient.min.css" />
    <style>
        .uk-table td, .uk-table th {
            border-bottom: 0px !important;
        }
        td.details-control {
            cursor: pointer;
        }
        div.slider {
            display: none;
        }
        .ext_info{
          background-color: #ddd !important;
        }
        table.dataTable tbody td.no-padding {
            padding: 0;
        }
        table.dataTable thead th {
            border-bottom: 0 !important;
        }
        table.dataTable tfoot th {
            border-top: 0 !important;
        }
        table.dataTable.no-footer {
            border-bottom: 0;
        }
        div.dt-buttons {
            float: right;
        }
        /*
        button.dt-button {
            margin-right: 0;
            margin-top: 5px;
            padding-right: 1em;
            padding-left: 1em;
            padding-top: 0.2em;
            padding-bottom: 0.2em;
        }
         */
    </style>

{% endblock %}
{% block main %}

{% if "admin" in g.permissions %}
            <div class="uk-panel uk-width-1-1 uk-panel-space uk-text-center uk-panel-hover uk-margin-bottom" style="height: 120px;" id="tasks_info">
                <p class="uk-h2 uk-text-nowrap">Pending tasks:
                {% if data.tasks and data.tasks|length > 0 %}
                    <a class="task_show" id="taks_queue_length">{{data.tasks|length}}</a></p>
                {% else %}
                    <a class="task_show" id="taks_queue_length">0</a></p>
                {% endif %}
                <div class="uk-button-group uk-hidden" id="task_btn_group">
                        <button class="uk-button task_history uk-button-small"><span class="uk-icon-history uk-margin-small-right"></span>History</button>
                        <button class="uk-button task_manage uk-button-small uk-button-danger"><span class="uk-icon-edit uk-margin-small-right"></span>Edit</button>
                </div>
            </div>

            <div class="uk-width-small-1-1 uk-width-medium-1-2 uk-margin-top uk-padding-remove">
                <table id="overview" class="display compact nowrap" data-order='[[ 4, "desc" ]]'>
                    <thead>
                    <tr>
                        <th>Partition</th>
                        <th>Allocated</th>
                        <th>Idle</th>
                        <th>Other</th>
                        <th>Total</th>
                    </tr>
                    </thead>
                </table>
            </div>
            <div class="uk-width-small-1-1 uk-width-medium-1-2 uk-margin-large-top">
                <table id="disk_space" class="display compact nowrap" data-order='[[ 0, "asc" ]]'>
                    <thead>
                        <tr>
                            <th>Mount</th>
                            <th>Size</th>
                            <th>Used</th>
                            <th>Available</th>
                            <th>Use</th>
                            <th>Filesystem</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="uk-width-small-1-1 uk-width-medium-1-2 uk-margin-large-top uk-padding-remove">
                <table id="sinfo" class="display compact" data-order='[[ 2, "desc" ]]'>
                    <thead>
                        <tr>
                            <th>Node</th>
                            <th>Reason</th>
                            <th>Since</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                </table>
            </div>
            <div class="uk-width-small-1-1 uk-width-medium-1-2 uk-margin-top">
                <table id="system" class="stripe compact" data-order='[[ 0, "asc" ]]'>
                    <thead>
                    <tr>
                        <th>Server</th>
                        <th>Memory</th>
                        <th>Swap</th>
                        <th>Load</th>
                        <th>Uptime</th>
                    </tr>
                    </thead>
                </table>
            </div>
{% endif %}
            <div class="uk-width-1-1 uk-padding-remove uk-margin-large">
                <table id="pending_projects" class="stripe compact" data-order='[[ 5, "desc" ]]'>
                    <thead>
                        <tr>
                            <th></th>
                            <th>Type</th>
                            <th>Title</th>
                            <th>Name</th>
                            <th>CPU</th>
                            <th>Created</th>
                            <th></th>
                        </tr>
                    </thead>
                </table>
            </div>

{% endblock %}
